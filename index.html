<!DOCTYPE html>
<html>
<head>
	<title>Thorana</title>
	<meta charset="utf-8">
	<meta name="description" content="ඉංජිනේරු පීඨ බෞද්ධ සහෝදර සංගමය මගින් ඉදිරිපත්  කරන DGITAL වෙසක් තොරණ ">
	<meta property="og:title" content="රේවථී ප්‍රේතවස්තුව">
	<meta property="og:url" content="http://gotozero.000webhostapp.com/apptest/html-canves-thorana/">
	<meta property="og:description" content="ඉංජිනේරු පීඨ බෞද්ධ සහෝදර සංගමය මගින් ඉදිරිපත්  කරන DGITAL වෙසක් තොරණ ">
	<meta property="og:image" content="http://gotozero.000webhostapp.com/apptest/html-canves-thorana/images/intro.jpg">
	<meta property="og:type" content="article" />

	<link rel="icon" type="image/x-icon" href="images/logo.ico" sizes="16x16">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

</head>
<body>
	<canvas style="background: rgba(0,0,0,0.9);width: 100%;height: 100%" id="myCanvas">
		Your browser not supported. please try with a different device.
	</canvas>
	<div class="container">		
		
		<div class="media">
		  <img src="images/Untitled-2.png" class="mr-3" alt="..." style="width: 30%">
		  <div class="media-body">
		  	<h5>තොරණ විස්තරය ශ්‍රවණය කරන්න</h5><audio autoplay="true" id="theAudio" src="images/Torana_full_Mixdown_2.mp3" controls></audio>

		  	<div class="btn-group" role="group" aria-label="Basic example">
			  <button type="button" class="btn btn-secondary" id="skip0" onclick="setTimerAudio(this)">තොරණ විස්තරය මුල සිට අසන්න</button>
			  <button type="button" class="btn btn-secondary" id="skip1" onclick="setTimerAudio(this)">1</button>
			  <button type="button" class="btn btn-secondary" id="skip2" onclick="setTimerAudio(this)">2</button>
			  <button type="button" class="btn btn-secondary" id="skip3" onclick="setTimerAudio(this)">3</button>
			  <button type="button" class="btn btn-secondary" id="skip4" onclick="setTimerAudio(this)">4</button>
			  <button type="button" class="btn btn-secondary" id="skip5" onclick="setTimerAudio(this)">5</button>
			  <button type="button" class="btn btn-secondary" id="skip6" onclick="setTimerAudio(this)">6</button>
			  <button type="button" class="btn btn-secondary" id="skip7" onclick="setTimerAudio(this)">7</button>
			  <button type="button" class="btn btn-secondary" id="skip8" onclick="setTimerAudio(this)">8</button>
			  <button type="button" class="btn btn-secondary" id="skip9" onclick="setTimerAudio(this)">තොරණ විස්තරය අවසානය</button>
			</div>

		    <h5 class="mt-0"><b>රේවතී ප්‍රේතවස්තුව</b></h5>
		    	<div id="description"></div>
				<div id="description0" style="display: none;">
		    		පින්බර වෙසක් මංගල්‍යයක් වේවා ..!!<br>
					Online වෙසක් කලාපය<br>
					<br>
					ඉංජිනේරු පීඨ බෞද්ධ සහෝදර සංගමය මගින් ඉදිරිපත්  කරන <br>

					DGITAL වෙසක් තොරණ <br>

					රේවථී ප්‍රේතවස්තුව
		    	</div>
		    	<div id="description1" style="display: none;">
		    		අප තිලෝගුරු සම්මා සම්බුදුරජානන් වහන්සේ බරණැස වැඩසිටි සමයේ නන්දික නම් පිනැති උපාසක තෙමේ බොහෝ  පින්කම් කරමින් දැහැමින් වාසය කළා.
					<br>
					එතුමා භාග්යවතුන් වහන්සේ ගැන අප්රමාන ශ්රද්ධාවෙන් හිටි කෙනෙක්. 
					<br>
					භාග්යවතුන් වහන්සේට නිරන්තරයෙන් දන්පැන් පුජා කළ හෙතෙමේ, අමාමැනියන්  වහන්සේ උදෙසා අලංකාර කුටියක්, දන්සලක් සාදා පුජා කළා. 
					<br>
					දන්සල සාදා පුජා කල ඒ මොහොතේම බොහෝ යස ඉසුරු වලින් ආඩ්යව තෞතිසා දිව්ය ලෝකයේ සුන්දර දිව්ය විමානයක් පහලවුනා. දිනක් අප මොග්ගලලානයන් වහන්සේ දිව්ය ලෝකයේ චාරිකාවේ වඩින සමයෙහි මෙම අලංකාර විමානය දුටුවා. ලක්ෂ ගණනක් වූ දිව්ය අප්සරාවන් සැරිසරන ඒ මනස්කාන්ත දිව්ය විමානය කාගේදැයි උන්වහන්සේ විමසා සිටි මොහොතේ, තාමත් මනුස්ස ලෝකයේ සිටින නන්දික නම් පිනැති උපාසක තෙමේ උදෙසා ඒ දිව්ය විමානය පහල වූ බව දැනගන්නට ලැබුනා. 

		    	</div>
		    	<div id="description2" style="display: none;">
		    		මෙපමනින් නොනැවතී, නන්දික තෙමේ ආර්ය වූ මහා සංඝරත්නය උදෙසා නිරතරයෙන් දානය සඳහා සෝදාගත් දෑත් ඇතිව විසුවා. ප්රනීතව උන්වහන්සේලා උදෙසා සකසා දන්දුන්නා.
					<br>
					එතුමාගේ දන් වැට යාචකයන්, අසරණයන් උදෙසාත් වුනා. දානයෙන් නොනැවතුණු හෙතෙමේ  දුෂ්කර මං මාවත්වල ඒදඬු පාලම් කරවා, ගස්වැල් රෝපණය කරවා, පිංතාලි සාදා, පැන් පොකුණු කරවා, සතුටු සිතින්, අත්හල සිතින්ම වාසය කළා. 

		    	</div>
		    	<div id="description3" style="display: none;">
		    		කාලයාගේ අවෑමෙන්, දෙමාපියන්ගේ දැඩි බල කිරීම නිසා නන්දික උපාසක තෙමේට සිය ඥාති සොහොයුරියක් වූ රේවතී නම් පවිටු ගති ඇති කාන්තාවක් සමග විවාහා වීමට සිදු වූවා. නන්දික මානවකයා මුලදී රේවතීයට අකමැති වූ නිසා සිය පවුලේ දේපල පවුල තුලම රඳවා ගැනීමේ අදහස තිබුණු ඔහුගේ දෙමාපියන් රේඑවතිට මෙවැනි උපායක් කියා දුන්නා. නන්දික කැමති බොහෝ සේ දන්පැන් දෙන නිතර කුසල් කරන අයට නිසා එලෙස පෙනී සිටින ලෙස.නන්දිකගේ දෙමාපියන්ගෙන් රේවතිට උපදෙස් ලැබුනා.
		    	</div>
		    	<div id="description4" style="display: none;">
		    		නන්දික උපාසක තෙමේ දිනක් වෙළදාම සඳහා පිටත් වීමට දන්වැට කරගෙනයාම රෙවතීට බාර කළා. තම ස්වාමියා නිවසින් බැහැර වන තුරු සිටි ඈ යාචකයන්ට තිබු දන්වැට වසා දැමුවා. සත්පුරුෂ ධර්මයෙහි අදක්ෂ වූ ඈ දානයේ   ආනිසංස නොදුටුවාය. මේ නම් මහා නාස්තියක් මැයි තෙපලාය. මහා සංඝ රුවනට පරිබ්රව කලාය. මේ ශ්රමනයන් නිසා මට සැප විඳින්න තියන ධනය නාස්ති වෙනවා කියා නිතර අක්රෝෂ කළාය .
		    	</div>
		    	<div id="description5" style="display: none;">
		    		වෙළදාම් නිමකර පැමිණි නන්දික උපාසක තෙමේ සිදුවූ සියල්ල ගැන අප්රමාන සංවේගයට පත්ව නැවතත් මහා සඟරුවන උදෙසා දන්වැට මනාව පිහිටවුවා. මැරෙන මොහොත තෙක් දානයේම එල්බ සිටියා. මරණින් මතු  හිරු රැස්  වන් ප්රභාස්වර, සිත් කළු තව්තිසා දෙව්ලොව පෙරකී  මනරම් දිව්ය විමානයේ උපත ලැබුවා.
		    	</div>
		    	<div id="description6" style="display: none;">
		    		නන්දික උපාසක තෙමේගේ කලුරිය කිරීම අවෑමෙන් සියලු ධනය රේවතී හට උරුම වුවත්  එම ධනය යොදවා නන්දික උපාසක තෙමේ නොකඩවා කරගෙන ආ දාන මාන සියල්ල ඇ විසින් සිදු කලේ නැහැ. භික්ෂුන් වහන්සේලාට පරිබ්රව කරමින් කාලය ගෙව්වා.ඇගේ ප්රභල අකුසල කර්ම දුටු වෛශවන දිව්යරාජය යක්ශයන් දෙදෙනෙක් කැඳවා රේවතී මෙයින් හත් වෙනි දවසේ පන පිටින්ම නිරයට ඇදගෙන යාමට නියමිත බව බරණැස පුරාම හඬ නගා කියන ලෙස අන කලා. ඉදින් මේ යකුන් දෙදෙනා මනු ලොව පැමින බරණැස වීදි පුරා මෙම පනිවිඩය කියා යන විට මහජනයා භීතියට පත් වුනා.රේවතිය කෙතරම් බිය වුනාද කියනවනම් කාමරයේ අගුලු දමා සතියක් කමරයේම සිටියා.නමුත් සත්වෙනි දවසේ කමරයේ බිත්තියෙන් මතු වූ රවුද්ර යකුන් දෙදෙනා ඇය විලාප දෙද්දී නිරයට ඇදගෙන ගියා.  රේවතී කල අකුසල කර්මයන් ඈ පන පිටින්ම සංසවක නම් අපායට ඇදගෙන යන්නට තරම් බලවත් වුනා.
		    	</div>
		    	<div id="description7"  style="display: none;">
		    		 රේවතී අපායට ඇදගෙන යන ගමනෙදි ඇ හට සංවේගය උපදවීම පිණිස යම පල්ලන් විසින් නන්දික දිව්ය පුත්රයාගේ විමානය දැකීමට සැලැස්සුවා. සුවඳ සඳූන් තැවැරූ සිරුරු ඇති දිව්ය අප්සරාවන් නිසා ඒ විමානයේ ඇතුළතත් පිටතත් තිබුනේ මනස්කාන්ත දර්ශනයක්. හිරු මඬලේ එළියට සමාන එළියක් ඒ විමානෙන් විහිදුනා.අප්රමාන දෙව්සැප විදින තමාගේ පෙර ජිවිතයේ ස්වාමියාගේ ආනුභාවයත් ඊට හාත්පසින් වෙනස් වූ තමාට අත් වූ ඉරණමත් ඈගේ හිත පසාරු කරගෙන යන්න තරම් වුනා. තමා නැවත මනු ලොව කිසියම් දිනක උපත ලදහොත් නන්දික සිටුතුමා සේ පින්කම් කරන බවට පොරොන්දු වුනත් ඇය කල කර්මයෙන් නම් ඈට ගැලවීමට හැකි වුනේ නෑ.<br>

					පෙර ජීවිතයේ තම ස්වාමියා නන්දික දිව්ය පුත්රයා වුවත් ඒ කිසිම දෙයකට නිරයට යන ඇගේ ගමන නම් වලකාලනු බැරි වුනා.
					<br>
					සියක් පුරුෂයන් ගැඹුරු ඇති සංසවක නිරයේ දහසක් අවුරුදු පැසෙන්න යමපල්ලන් රේවතී ගේ දෙපයින් අල්ලා යටිකුරු කළා. ඝෝර වූ සංසවක නිරයට හෙළුවා.
					<br>
		    	</div>
		  </div>
		</div>
		<br>
		<h3><b>අදහස් (Comments)</b></h3>
		<div class="media">
		  <div class="media-body">
		    <h4 class="mt-0" id="commenterName">මේ දක්වා කිසිවෙකු අදහසක් දක්වා නැත.(No one has commented so far.)</h4>
		    <h6 id="commentDate"></h6>
		    <h6 id="comment"></h6>
		  </div>
		</div>
		<br>
		<h3><b>ඔබේ අදහස එක් කරන්න</b></h3>
		<form>
		  <div class="form-group">
		    <label for="exampleFormControlInput1">ඔබේ නම (Your name)</label>
		    <input type="name" class="form-control" id="userName" placeholder="ඔබේ නම " required="true">
		  </div>
		  <div class="form-group">
		    <label for="exampleFormControlTextarea1">ඔබේ අදහස (Your Comment) </label>
		    <textarea class="form-control" id="userComment" rows="3" required></textarea>
		  </div>
		  <button type="submit" class="btn btn-primary" id="commSub">Submit</button>
		</form>

		<script>
			var userName = document.getElementById("userName");
			var userComment = document.getElementById("userComment");

			var yourName,yourComment;
			document.getElementById("commSub").addEventListener("click", function(event){
				event.preventDefault();
				event.stopPropagation();

				yourName = userName.value;
				yourComment = userComment.value;

				var data = new FormData();
				data.append('name',yourName);
				data.append('comment',yourComment);
				
				var request = new XMLHttpRequest();
				request.addEventListener('readystatechange',function(event){
					if (this.readyState == 4) {
						if (this.status == 200) {
							var response = this.response;
							console.log(response);
						}
					}
				});
				request.open('POST','process.php');
				request.setRequestHeader('Cache-Control','no-cache');
				request.send(data);
			});	


		</script>
	</div>
	<script>
		var description = document.getElementById('description');
		var description0 = document.getElementById('description0');
		var description1 = document.getElementById('description1');
		var description2 = document.getElementById('description2');
		var description3 = document.getElementById('description3');
		var description4 = document.getElementById('description4');
		var description5 = document.getElementById('description5');
		var description6 = document.getElementById('description6');
		var description7 = document.getElementById('description7');

		var audioElement = document.getElementById("theAudio");
		var currentTime;//audioElement.currentTime;
		
		audioElement.onloadeddata  = function(){
			audioElement.play();
			// alert("playing");
		}
		
		var times = [0,5,87,124,170,213,243,33,423];
		
		audioElement.ontimeupdate = function(){
			currentTime = audioElement.currentTime;
			if(currentTime > times[0] && currentTime < times[1]) {
				description.innerHTML = '';
				description.innerHTML = description0.innerHTML;

			}else if(currentTime > times[1] && currentTime < times[2]){
				description.innerHTML = '';
				description.innerHTML = description1.innerHTML;
				
			}else if(currentTime > times[2] && currentTime < times[3]){
				description.innerHTML = '';
				description.innerHTML = description2.innerHTML;

			}else if(currentTime > times[3] && currentTime < times[4]){
				description.innerHTML = '';
				description.innerHTML = description3.innerHTML;

			}else if(currentTime > times[4] && currentTime < times[5]){
				description.innerHTML = '';
				description.innerHTML = description4.innerHTML;

			}else if(currentTime > times[5] && currentTime < times[6]){
				description.innerHTML = '';
				description.innerHTML = description5.innerHTML;

			}else if(currentTime > times[6] && currentTime < times[7]){
				description.innerHTML = '';
				description.innerHTML = description6.innerHTML;

			}else if(currentTime > times[7] ){
				description.innerHTML = '';
				description.innerHTML = description7 .innerHTML;

			}
			// console.log();
		}
		
		// audioElement.setAttribute('style','display:none');

		function setTimerAudio(elementId){
			var elementId = elementId;
			var timesmapID = elementId.id.split('skip')[1];
			audioElement.pause();
			audioElement.currentTime = times[timesmapID];
			setTimeout(function(){
				audioElement.play();	
			} ,500);

		}

		var myCanvas;
		var canvasWidth,canvasHeight;
		var ww,hw;
		var w,h;
		var context;
		var r,R,z; //radius of circles and z = sin(pi/8)
		var marginTop,marginBotom;
		var cx = new Array();
		var cy = new Array();
		var pointSqx,pointSqy; // starting point of squre down
		var dimPointSqx,dimPointSqy; // end point of squre down
		var fractionOfDispSmall,fractionOfDispLarge //bulb display area as fraction of radius
		var angleBC; 	//angle between box and botom circle center (c0)
		var leftImgBoxStartX,leftImgBoxStartY,rightImgBoxStartX,rightImgBoxStartY; //starting coodinates of first image boxes
		var leftImageBoxW,leftImageBoxH,rightImgBoxW,rightImgBoxH; // dimensions of image boxes	
		var imageBoxPadding;
		var pointX,pointY;

		window.onload = function(){
			ww = window.innerWidth;
			hw = window.innerHeight;

			myCanvas = document.getElementById('myCanvas');
			myCanvas.width = ww;
			myCanvas.height = ww/2;
			 
			//full screen function
			function fullscreen(){
	           // var el = document.getElementById('canvas');
	           if(myCanvas.webkitRequestFullScreen) {
	               myCanvas.webkitRequestFullScreen();
	           }
	          else {
	             myCanvas.mozRequestFullScreen();
	          }            
			}
			myCanvas.addEventListener("click",fullscreen);

			w = myCanvas.width;
			h = myCanvas.height;

			//calculate r and R (radii) - *get canvas dimentions [leave margings from top and bottom and use rest for draw circles]
			marginTop = 0.04;  // 4% of w
			marginBotom = 0.1; // 10% of w
			z = Math.sin(Math.PI/8);
			r = ((1 - (marginTop + marginBotom)) / 4) * (z / (z + 1)) * w;
			R = ((1 - z) / z) * r;

			// calculate center possitions of each circles
			cx[0] = w/2;	// centers of main circle
			cy[0] = (h/2)*(1 + marginTop - marginBotom);

			for (var i = 0; i <= 7; i++) {
				// creating x coordinates of centers
				cx[i+1] = cx[0] + (R + r) * Math.sin(i*(Math.PI/4));
			}

			for (var i = 0; i <= 7; i++) {
				// creating y coordinates of centers
				cy[i+1] = cy[0] + (R + r) * Math.cos(i*(Math.PI/4));
			}

			// calculate dimentions of down square
			pointSqx = cx[0] - (R + 3*r);		// starting point
			pointSqy = (cy[0] + r) + ((R + r)/(Math.sqrt(2)));
			dimPointSqx = 6*r + 2*R;			// dimensions
			dimPointSqy = 0.98*h - pointSqy;

			// get context of the canvas
			context = myCanvas.getContext("2d");
			// draw background
			// var moon = new Image();
			// moon.src = "images/moon.png";
			// moon.addEventListener('load',function(){
			// 	context.drawImage(moon,5,5,200,200);
			// });
			// var clouds = new Image();
			// clouds.src = "images/clouds.png";
			// clouds.addEventListener('load',function(){
			// 	context.drawImage(clouds,100,5,400,150);
			// });

			// draw square
			context.beginPath();
			context.strokeStyle = "rgba(255,255,255,1)";
			context.fillStyle = "rgba(0,0,0,0.4)";
			context.strokeRect(pointSqx,pointSqy,dimPointSqx,dimPointSqy);
			context.fillRect(pointSqx,pointSqy,dimPointSqx,dimPointSqy);
			context.fill();
			context.closePath();

			// create image boxess
			imageBoxPadding = 0.01*h;
			// create left image box
			var d = (r - cy[1] + cy[8])/r;
			angleBC = Math.acos(d);
			leftImgBoxStartX = pointSqx + imageBoxPadding;
			leftImgBoxStartY = pointSqy + imageBoxPadding;
			leftImageBoxH = dimPointSqy - 2*imageBoxPadding;
			leftImageBoxW = R +3*r - r*Math.sin(angleBC) - 2*imageBoxPadding;

			// var imageBoxLeft = new Image();
			// imageBoxLeft.src = "images/data5.jpg";
			// imageBoxLeft.addEventListener('load',function(){
			// 	context.drawImage(imageBoxLeft,leftImgBoxStartX,leftImgBoxStartY,leftImageBoxW,leftImageBoxH);		
			// });

			// create right image box
			rightImgBoxStartX = cx[0] + r*Math.sin(angleBC) + imageBoxPadding;
			rightImgBoxStartY = cy[1] + r*Math.cos(angleBC) + imageBoxPadding;
			rightImgBoxH = leftImageBoxH ;//- 2*imageBoxPadding already added;
			rightImgBoxW = leftImageBoxW ;//- 2*imageBoxPadding already added;

/*			var imageBoxRight = new Image();
			imageBoxRight.src = "images/data5.jpg";
			imageBoxRight.addEventListener('load',function(){
				context.drawImage(imageBoxRight,rightImgBoxStartX,rightImgBoxStartY,rightImgBoxW,rightImgBoxH);		
			});*/

			//create lower image box
			var downImage = new Image();
			downImage.src = "images/thorana.png";
			downImage.addEventListener('load',function(){
				context.drawImage(downImage,leftImgBoxStartX,leftImgBoxStartY,R*2+6*r-imageBoxPadding*2,rightImgBoxH);
			});

			for(var i = 0; i <= cx.length ; i++){
				//draw outer circle of each circles
				context.beginPath();
				context.strokeStyle = "rgba(255,255,255,1)";
				context.fillStyle = "rgba(0,0,0,1)";
				if (i == 0) {
					context.arc(cx[i],cy[i],R,Math.PI*2,false);
				}else{
					context.arc(cx[i],cy[i],r,Math.PI*2,false);
				}
				context.stroke();
				context.fill();
				context.closePath();
			}

			fractionOfDispSmall = 0.6 ;
			fractionOfDispLarge = 0.1 ;
			for(var i = 0; i <= cx.length ; i++){
				//draw inner circle of each circles
				context.beginPath();
				context.strokeStyle = "rgba(255,255,255,1)";
				context.fillStyle = "rgba(255,255,255,0.7)";
				if (i == 0) {
					context.arc(cx[i],cy[i], R * fractionOfDispLarge , Math.PI*2,false);
				}else{
					context.arc(cx[i],cy[i], r* fractionOfDispSmall , Math.PI*2,false);
				}
				context.stroke();
				context.fill();
				context.closePath();
			}
			
			// Center circle inner Bulb animations set

			var flowerCenter = 0.88*R*(1 - fractionOfDispLarge);
			var flowerCenterDotSize = 0.004*w;
			var flowerOuterDotSize = 0.0038*w;
			var flowerLevel1FormCenter = 0.012 *w;
			var countOuterFlowers = 5;
			// var flowerLevel2FormCenter = flowerLevel1FormCenter *2;

			var centerCircleFlowerPattern = function(){
				for (var i1 = 0 ;i1 <8 ;i1++){
					if (i1 == 2) {
						continue;
					}else{
						var flowerCenterAngle = Math.PI/4*i1; // 2*PI/8 = PI/4
						var flowerX = cx[0] + flowerCenter * Math.cos(flowerCenterAngle);
						var flowerY = cy[0] + flowerCenter * Math.sin(flowerCenterAngle); 
						context.beginPath();
						context.fillStyle = "rgba(255,255,255,"+Math.random()+")";
						// context.clearRect(flowerX-flowerCenterDotSize,flowerY-flowerCenterDotSize,2*flowerOuterDotSize,flowerOuterDotSize*2);
						context.arc(flowerX ,flowerY, flowerCenterDotSize  , Math.PI*2,false);
						context.fill();
						context.closePath();

						// flower level 1
						
						var red = 255*Math.random();
						var intense = Math.random();

						for(var i2 = 0 ; i2 < countOuterFlowers ;i2++){
							var flowerOuterDotAngle = flowerCenterAngle + 2*Math.PI/countOuterFlowers*i2;

							var level2posX = flowerX + flowerLevel1FormCenter * Math.cos(flowerOuterDotAngle);
							var level2posY = flowerY + flowerLevel1FormCenter * Math.sin(flowerOuterDotAngle);
							
							context.beginPath();
							// context.fillStyle = "rgba(0,0,0,1)";
							// context.clearRect(level2posX - flowerOuterDotSize,level2posY - flowerOuterDotSize,flowerOuterDotSize,flowerOuterDotSize);
							context.fillStyle = "rgba("+red+",10,0,"+intense+")";
							context.arc(level2posX,level2posY, flowerOuterDotSize  , Math.PI*2,false);
							context.fill();
							context.closePath();
						}
					}
				}
				// requestAnimationFrame(centerCircleFlowerPattern);
			}
			
			// center circle filler patern
			var numberOfDotsEach = {
				// line:[6,12,18,12,30,]
				line: [12,18,30,30,48]
			}
			var centerCircleFillerPattern = function(){
				for(var i4 = 0;i4<5 ;i4++){
					var intensity2 = Math.random();
					for(var i3 = 0;i3<numberOfDotsEach.line[i4] ;i3++){
						var plotAngle = 2*Math.PI/numberOfDotsEach.line[i4]*i3;
						if (plotAngle > Math.PI/4 && plotAngle < Math.PI/4*3) {
							continue;
						}else{
							var localR =  (2+i4)*fractionOfDispLarge*R;
							var dotX = cx[0] + localR * Math.cos(2*Math.PI/numberOfDotsEach.line[i4]*i3);
							var dotY = cy[0] + localR * Math.sin(2*Math.PI/numberOfDotsEach.line[i4]*i3);

							context.beginPath();
							context.fillStyle = "rgba(10,"+255*intensity2+","+Math.random()*200+",0.6)";

							context.arc(dotX,dotY,flowerCenterDotSize*0.75,2*Math.PI,false);
							context.fill();
							context.closePath();
						}
					}
				}
					// console.log('px' + i3);
					// requestAnimationFrame(centerCircleFillerPattern);
			}

			// small circles inner Bulb animations set
			var intensity = 0.9 ;	
			var dotSize = 0.003*w;
			var dotSizeMedium = 0.75*dotSize;
			var dotsForSmallCircle = {
				numberOfDots : [12,24,36],
				radii : [0.7,0.8,0.9]
			};
			var drawInnerCirclePattern = function(){
			
				for (var k = 0; k < dotsForSmallCircle.radii.length; k++) {
					// context.strokeStyle = "rgba(255,255,255,"+intensity+")";
					context.fillStyle = "rgba("+Math.random()*255+","+Math.random()*255+","+Math.random()*255+","+intensity+")";
					for (var j = 1; j < cx.length; j++) {
						for(var i = 0; i<dotsForSmallCircle.numberOfDots[k] ;i++){
							context.beginPath();
							// context.clearRect(cx[j] + r * dotsForSmallCircle.radii[k] * Math.cos(2*Math.PI/dotsForSmallCircle.numberOfDots[k]*i) - dotSize,
							// 	cy[j] + r * dotsForSmallCircle.radii[k] * Math.sin(2*Math.PI/dotsForSmallCircle.numberOfDots[k]*i) - dotSize,
							// 	2*dotSize,
							// 	2*dotSize);

							context.arc(cx[j] + r * dotsForSmallCircle.radii[k] * Math.cos(2*Math.PI/dotsForSmallCircle.numberOfDots[k]*i) ,
								cy[j] + r * dotsForSmallCircle.radii[k] * Math.sin(2*Math.PI/dotsForSmallCircle.numberOfDots[k]*i),
								dotSize,
								Math.PI*2,
								false);
							// context.stroke();
							context.fill();
							context.closePath();	
						}
					}
				}
				// requestAnimationFrame(drawInnerCirclePattern);
			}

			var drawOuterLine = function(){
				var numberOfDotsOuterRing = 8;
				var fr = 0.1;

				// var alpha = Math.atan((Math.sqrt(3)*fr)/(2*Math.sqrt(2) + fr));
				var alpha = 0.625 * Math.PI - Math.acos(1/(1 + fr));
				var k = 0;
				

				for (var j = 3; j <= 7; j++) {
					for (var i = -numberOfDotsOuterRing; i < numberOfDotsOuterRing; i++) {
						context.fillStyle = "rgba("+255*Math.random()+",255,255,0.5)";
						pointX = cx[j] + r*(1+fr) * Math.cos(-k * Math.PI/4 + alpha/numberOfDotsOuterRing*i);
						pointY = cy[j] + r*(1+fr) * Math.sin(-k * Math.PI/4 + alpha/numberOfDotsOuterRing*i);
						
						context.beginPath();
						context.arc(pointX,pointY,dotSize,Math.PI*2,false);
						context.fill();
						context.closePath();						
					}
					k++;
				}

				// right corner
				var beta = Math.acos((1 - fr)/(1 + fr));
				
				var rightStartAngle = Math.PI/4 - alpha;

				var fullAngle = 0.75*Math.PI - (alpha + beta);

				
				var delta = ((-rightStartAngle + beta)/numberOfDotsOuterRing);
				// console.log(delta*180/(Math.PI));

				for(var k = 0; k<=(numberOfDotsOuterRing + 1); k++){

					pointX = cx[2] +  (1 + fr)*r * Math.cos(rightStartAngle + delta * k);
					pointY = cy[2] +  (1 + fr)*r * Math.sin(rightStartAngle + delta * k);
					
					context.fillStyle = "rgba("+255*Math.random()+",255,255,0.5)";
					context.beginPath();
					context.arc(pointX,pointY,dotSize,Math.PI*2,false);
					context.fill();
					context.closePath();

					//mirror for left side
					pointX = 2*cx[0]-pointX;
					context.beginPath();
					context.arc(pointX,pointY,dotSize,Math.PI*2,false);
					context.fill();
					context.closePath();					
				}

				// drow box outline
				var boxUpperStertX = cx[2] +  (1 + fr)*r * Math.sin(beta);
				var boxUpperStertY = cy[2] +  (1 + fr)*r * Math.cos(beta);
				var boxUpperEndX = cx[0] + R + (3)*r ; // box upper end y is same as end 
				// pointX = boxUpperStertX;
				// pointY = boxUpperStertY;
				var boxUpperLastX;

				var boxUpperNumberOfDots = 12;
				var boxUpperDeltaX = (boxUpperEndX - boxUpperStertX)/boxUpperNumberOfDots;
				for(var x = boxUpperStertX ; x<= boxUpperEndX ;x=x+boxUpperDeltaX ){
					context.fillStyle = "rgba("+255*Math.random()+",255,255,0.5)";
					context.beginPath();
					context.arc(x,boxUpperStertY,dotSize,Math.PI*2,false);
					context.fill();
					context.closePath();

					//MIRROR
					// context.fillStyle = "rgba(0,0,255,0.5)";
					context.beginPath();
					context.arc(cx[0]*2 - x,boxUpperStertY,dotSize,Math.PI*2,false);
					context.fill();
					context.closePath();
					boxUpperLastX = x;

				}
				
			}
		
			//draw fill triangle between circles
			var filTriangle = function(){
				// var i=1;
				fr = 0.1;
				// var frd = 1+fr;
				var plotAngle;
				// var r2 = 4*dotSizeMedium;
				var x1,y1,newAngle;
				var dotNumbers = [2,2,3,4,2,1];

				for (var i = 1; i < cx.length - 2; i++) {
					for (var i4 = -3; i4 < 3; i4++) {
						// console.log(i4);
						pointX = cx[0] + R*(1 + fr*i4)*Math.sin(plotAngle);
						pointY = cy[0] + R*(1 + fr*i4)*Math.cos(plotAngle);

						plotAngle = (1 + 2*i)*Math.PI/8;
						context.fillStyle = "rgba(0,"+Math.random()*255+",255,0.8)";
						context.beginPath();
						context.arc(pointX,pointY,dotSizeMedium,Math.PI*2,false);
						context.fill();
						context.closePath();

						for(var k=0;k<dotNumbers[i4+3];k++){
							newAngle = plotAngle + k*Math.PI/36; // -> 180/36 = 5 degree. 
							x1 = cx[0] + R*(1 + fr*i4)*Math.sin(newAngle);
							y1 = cy[0] + R*(1 + fr*i4)*Math.cos(newAngle);
							
							// context.fillStyle = "rgba("+Math.random()*255+",255,0,0.8)";
							context.beginPath();
							context.arc(x1,y1,dotSizeMedium,Math.PI*2,false);
							context.fill();
							context.closePath();							
							
							newAngle = plotAngle - k*Math.PI/36; // -> 180/36 = 5 degree.

							x2 = cx[0] + R*(1 + fr*i4)*Math.sin(newAngle);
							y2 = cy[0] + R*(1 + fr*i4)*Math.cos(newAngle);
							// context.fillStyle = "rgba("+Math.random()*255+",255,0,0.8)";
							context.beginPath();
							context.arc(x2,y2,dotSizeMedium,Math.PI*2,false);
							context.fill();
							context.closePath();							
						}
					}				
				}
			}
			// filTriangle();

			var image = new Image();
			image.src = "images/Untitled-2.png";
			image.addEventListener('load',function(){
				for(var i = 1; i < cx.length ; i++){
					context.drawImage(image,(cx[i] - r*fractionOfDispSmall),(cy[i] - r*fractionOfDispSmall),fractionOfDispSmall*2*r,fractionOfDispSmall*2*r);
				}
			});

			var imageCenter = new Image();
			var dim = 2*R*Math.sin(Math.atan(0.5));
			imageCenter.src = "images/budda_rupaya.png";
			imageCenter.addEventListener('load',function(){
				context.drawImage(imageCenter,(cx[0] - R*Math.sin(Math.PI/6) + 0.005*w),cy[0],dim,dim);
				
			});

			

			//start patterns to run:
			// drawInnerCirclePattern();
			var triggerTime = 250;
			setInterval(drawInnerCirclePattern,triggerTime);
			// centerCircleFillerPattern();
			setInterval(centerCircleFillerPattern,triggerTime);
			// centerCircleFlowerPattern();
			setInterval(centerCircleFlowerPattern,triggerTime/2);
			// drawOuterLine()
			setInterval(drawOuterLine,triggerTime);
			//filTriangle()
			setInterval(filTriangle,triggerTime);
		}
	</script>

</body>
</html>